<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WRUS Portal</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/dashboard.css">
  <link rel="stylesheet" href="css/dashboard-map.css">
  <link rel="stylesheet" href="css/component/bubble.css">
</head>
<body>
  <div class="d-flex flex-column flex-md-row" id="wrapper">
    <div id="sidebarContainer"></div>

      <!-- Page Content -->
    <div class="container-fluid d-flex flex-column vh-100 p-2" id="page-content">
      <!-- Tabs Navigation -->
      <ul class="nav nav-tabs flex-shrink-0" id="dashboardTabs" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profileTab" type="button" role="tab" aria-controls="profileTab" aria-selected="true">
            About
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link .btn-3d" id="summary-tab" data-bs-toggle="tab" data-bs-target="#summaryTab" type="button" role="tab" aria-controls="summaryTab" aria-selected="false">
            Database
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="settings-tab" data-bs-toggle="tab" data-bs-target="#settingsTab" type="button" role="tab" aria-controls="settingsTab" aria-selected="false">
            Account Settings
          </button>
        </li>
      </ul>

      <!-- Tab Content -->
      <div class="tab-content" id="dashboardTabContent">
        <!-- About Tab -->
        <div class="tab-pane fade show active" id="profileTab" role="tabpanel" aria-labelledby="profile-tab">
          <div class="profile-banner d-flex flex-column align-items-start p-2 rounded shadow-sm mb-1">

            <!-- Jumbotron -->
            <div class="container-fluid simple-water-jumbotron mt-4">
              <div class="p-0 mb-4 rounded-3 shadow-sm">
                <div class="container-fluid py-5">
                   <img src="./images/denr logo.png" alt="DENR Logo" class="denr-logo mb-3">
                  <h1 class="display-5 fw-bold">
                    Water Resources and Utilization Section - National Capital Region
                  </h1>
                  <p class="col-md-8 text-light mx-auto">
                    The Water Resources Utilization Section (WRUS) of Licenses, Patents, and Deeds Division (LPDD) is responsible for the conducting of water inventory for water users and sources and verifying water permits for the National Capital Region.
                  </p>

                  <div class="activities-section">
                    <h5 class="fw-bold mb-3 text-light"> Activities - Annual Target</h5>
                    <ul class="list-group list-group-flush col-md-6 mx-auto">
                      <li class="list-group-item d-flex justify-content-between align-items-center">
                      1. Conduct of Inventory of Water Users
                        <span class="badge badge-3d rounded-pill bg-primary shadow-sm">220</span>
                      </li>
                      <li class="list-group-item d-flex justify-content-between align-items-center">
                      2. Conduct of Inventory of Water Sources
                        <span class="badge badge-3d rounded-pill bg-success shadow-sm">110</span>
                      </li>
                      <li class="list-group-item d-flex justify-content-between align-items-center">
                      3. Mapping of Water Users and Sources
                        <span class="badge badge-3d rounded-pill bg-info shadow-sm">1</span>
                      </li>
                      <li class="list-group-item d-flex justify-content-between align-items-center">
                      4. Maintenance and Updating of Database for Water Users
                        <span class="badge badge-3d rounded-pill bg-dark shadow-sm">1</span>
                      </li>  
                    </ul>
                  </div>
                </div>
              </div>
            </div>

            <div class="container mt-4 text-center">
              <div class="table-responsive d-inline-block">
                <div class="table-container">
                  <div id="yearlyWaterUserSummary" class="my-4"></div>
                </div>
              </div>
            </div>

            <!-- Issuances Section -->
            <div class="container my-5">
              <h2 class="text-center fw-bold text-dark mb-4">Issuances</h2>
              <p class="text-center text-dark mb-5">
                An overview of the principal mandates of the Water Resources and Utilization Section  (National Capital Region) concerning the conducting of water inventory, identification of water users and sources, preparation of reports, and management of geospatial information.
              </p>

              <div class="row text-center">
                <!-- Card 1 -->
                <div class="col-md-6 mb-4">
                  <div class="card h-100 shadow-sm border-0">
                    <div class="card-header-banner">
                      PD no. 1067 - Water Code of the Philippines
                    </div>
                    <div class="card-body d-flex flex-column">
                      <p class="card-text flex-grow-1">
                        Presidential Decree No. 1067, or the Water Code of the Philippines, declares all waters state-owned and regulates their use, conservation, and protection through the NWRB.
                      </p>
                      <div class="d-flex gap-2 mt-auto">
                        <a href="./files/EO 22 - CREATING THE WATER RESOURCES MANAGEMENT OFFICE IN THE DENR.pdf" 
                          target="_blank" 
                          class="btn btn-outline-light btn-sm btn-3d">
                          View PDF
                        </a>
                        <a href="./files/EO 22 - CREATING THE WATER RESOURCES MANAGEMENT OFFICE IN THE DENR.pdf" 
                          download 
                          class="btn btn-outline-light btn-sm btn-3d">
                          Download PDF
                        </a>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Card 2 -->
                <div class="col-md-6 mb-4">
                  <div class="card h-100 shadow-sm border-0">
                    <div class="card-header-banner">
                      NWRB Resolution No. 001-0904 - Metro Manila Critical Areas
                    </div>
                    <div class="card-body d-flex flex-column">
                      <p class="card-text flex-grow-1">
                        NWRB Resolution No. 001-0904 designates Metro Manila as a critical water area to ensure stricter regulation, conservation, and sustainable management of its water resources.
                      </p>
                      <div class="d-flex gap-2 mt-auto">
                        <a href="./files/NWRB Resolution No. 001-0904.pdf" 
                          target="_blank" 
                          class="btn btn-outline-light btn-sm btn-3d">
                          View PDF
                        </a>
                        <a href="./files/NWRB Resolution No. 001-0904.pdf" 
                          download 
                          class="btn btn-outline-light btn-sm btn-3d">
                          Download PDF
                        </a>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Card 3 -->
                <div class="col-md-6 mb-4">
                  <div class="card h-100 shadow-sm border-0">
                    <div class="card-header-banner">
                      NWRB 15-1116 - Deputation of DENR Regional Offices on Certain Functions of Water Use Regulation
                    </div>
                    <div class="card-body d-flex flex-column">
                      <p class="card-text flex-grow-1">
                        NWRB Resolution No. 15-1116 authorizes DENR Regional Offices to assist in enforcing water use regulations by deputizing them for specific regulatory functions.
                      </p>
                      <div class="d-flex gap-2 mt-auto">
                        <a href="./files/NWRB_15-1116 - Deputation of DENR Regional Offices on Certain Functions of Water Use Regulation.pdf" 
                          target="_blank" 
                          class="btn btn-outline-light btn-sm btn-3d">
                          View PDF
                        </a>
                        <a href="./files/NWRB_15-1116 - Deputation of DENR Regional Offices on Certain Functions of Water Use Regulation.pdf" 
                          download 
                          class="btn btn-outline-light btn-sm btn-3d">
                          Download PDF
                        </a>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Card 4 -->
                <div class="col-md-6 mb-4">
                  <div class="card h-100 shadow-sm border-0">
                    <div class="card-header-banner">
                      EO 22 - Creating the Water Resources Management Office in the DENR
                    </div>
                    <div class="card-body d-flex flex-column">
                      <p class="card-text flex-grow-1">
                        Executive Order No. 22 establishes the Water Resources Management Office (WRMO) within the DENR to coordinate, integrate, and oversee the sustainable management of the country’s water resources.
                      </p>
                      <div class="d-flex gap-2 mt-auto">
                        <a href="./files/EO 22 - CREATING THE WATER RESOURCES MANAGEMENT OFFICE IN THE DENR.pdf" 
                          target="_blank" 
                          class="btn btn-outline-light btn-sm btn-3d">
                          View PDF
                        </a>
                        <a href="./files/EO 22 - CREATING THE WATER RESOURCES MANAGEMENT OFFICE IN THE DENR.pdf" 
                          download 
                          class="btn btn-outline-light btn-sm btn-3d">
                          Download PDF
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>

        <!-- Database Tab -->
        <div class="tab-pane fade" id="summaryTab" role="tabpanel" aria-labelledby="summary-tab">
          <div class="profile-banner d-flex flex-column align-items-start p-2 rounded shadow-sm mb-1">

            <!-- Inner Tabs -->
            <ul class="nav nav-tabs mb-3" id="summaryInnerTabs" role="tablist">
              <li class="nav-item" role="presentation">
                <button class="nav-link active" id="permit-summary-tab" data-bs-toggle="tab" data-bs-target="#permitSummary" type="button" role="tab" aria-controls="permitSummary" aria-selected="true">
                  Water Permit
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="city-accom-tab" data-bs-toggle="tab" data-bs-target="#cityAccomplishment" type="button" role="tab" aria-controls="cityAccomplishment" aria-selected="false">
                  Water Users and Sources
                </button>
              </li>
            </ul>

            <!-- Inner Tab Content -->
            <div class="tab-content w-100" id="summaryInnerTabsContent">

              <!-- Permit Summary Tab Pane -->
              <div class="tab-pane fade show active" id="permitSummary" role="tabpanel" aria-labelledby="permit-summary-tab">
                <div class="city-table-wrapper text-center my-4">
                  <div class="table-responsive d-flex justify-content-center">
                    <div class="table-container">
                      <div id="cityPermitTable" class="mb-4"></div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Accomplishment Per City Tab Pane -->
              <div class="tab-pane fade" id="cityAccomplishment" role="tabpanel" aria-labelledby="city-accom-tab">
                <div class="city-table-wrapper text-center my-4">
                  <div class="table-responsive d-flex justify-content-center">
                    <div class="table-container">
                      <div id="cityAccomplishmentTable" class="my-4 w-100"></div>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>

        <!-- Account Settings Tab -->
        <div class="tab-pane fade" id="settingsTab" role="tabpanel" aria-labelledby="settings-tab">
          <div class="profile-banner d-flex flex-column align-items-start p-2 rounded shadow-sm mb-1 w-100">
            <h3>Account Settings</h3>
            <p class="text-muted">Change your password below.</p>

            <div class="card shadow-sm water-card p-4 mt-4">
              <div class="text-center">
                <i class="fas fa-cog gear-icon"></i>
                <h5 class="text-water mb-3">Change Password</h5>
              </div>
              <form id="changePasswordForm">
                <div class="mb-3">
                  <label for="newPassword" class="form-label text-muted">New Password</label>
                  <input type="password" class="form-control form-water" id="newPassword" required minlength="6" />
                </div>
                <div class="mb-3 text-muted">
                  <label for="confirmPassword" class="form-label">Confirm Password</label>
                  <input type="password" class="form-control form-water" id="confirmPassword" required minlength="6" />
                </div>
                <button type="submit" class="btn btn-water w-100">Update Password</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Announcement Modal -->
  <div class="modal fade water-modal" id="announcementModal" tabindex="-1" aria-labelledby="announcementModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content water-modal-content">
        <div class="modal-header water-modal-header">
          <h5 class="modal-title" id="announcementModalLabel">Announcement</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body water-modal-body">
          <p id="announcementMessage">Default message</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Barangay Modal -->
  <div class="modal fade" id="barangayModal" tabindex="-1" aria-labelledby="barangayModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title text-white" id="barangayModalLabel">Barangay Breakdown</h5>
          <button type="button" class="btn-close btn-3d btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- Dynamic content here -->
          <div class="table-responsive">
            <div id="barangayModalBody"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!--  Water User Modal -->
  <div class="modal fade" id="waterUsersModal" tabindex="-1" aria-labelledby="waterUsersModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header bg-success text-white">
          <h5 class="modal-title text-white" id="waterUsersModalLabel">Water Users</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="table-responsive">
            <div id="waterUsersModalBody"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Map Modal -->
  <div class="modal fade" id="mapModal" tabindex="-1" aria-labelledby="mapModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header bg-success d-flex justify-content-between align-items-center">
          <h5 class="modal-title text-white" id="mapModalLabel">National Capital Region Map</h5>
          <div>
            <button class="btn btn-3d btn-light btn-sm me-2" id="printMapBtn">
              <i class="bi bi-printer"></i> Print
            </button>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
        </div>
        <div class="modal-body p-0">
          <div id="leafletMap"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script type="module" src="./js/dashboard/dashboard-init.js"></script>
</body>
</html>
