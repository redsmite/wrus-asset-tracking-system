<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WRUS Portal</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/dashboard.css">
  <link rel="stylesheet" href="css/component/bubble.css">
</head>
<body>
  <div class="d-flex flex-column flex-md-row" id="wrapper">
    <div id="sidebarContainer"></div>

    <!-- Page Content -->
  <div class="container-fluid d-flex flex-column vh-100 p-4" id="page-content">
    <!-- Tabs Navigation -->
    <ul class="nav nav-tabs flex-shrink-0" id="dashboardTabs" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profileTab" type="button" role="tab" aria-controls="profileTab" aria-selected="true">
          Profile
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link .btn-3d" id="summary-tab" data-bs-toggle="tab" data-bs-target="#summaryTab" type="button" role="tab" aria-controls="summaryTab" aria-selected="false">
          Summary Report
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="settings-tab" data-bs-toggle="tab" data-bs-target="#settingsTab" type="button" role="tab" aria-controls="settingsTab" aria-selected="false">
          Account Settings
        </button>
      </li>
    </ul>

    <!-- Tab Content -->
    <div class="tab-content" id="dashboardTabContent">
      <!-- Profile Tab -->
      <div class="tab-pane fade show active" id="profileTab" role="tabpanel" aria-labelledby="profile-tab">
        <div class="profile-banner d-flex flex-column align-items-start p-4 rounded shadow-sm mb-1">
          <div class="profile-info">
            <h3 id="welcomeText" class="welcome-text mb-1"></h3>
            <p id="userPositionText" class="user-position mb-0">Position</p>
          </div>

          <!-- Scorecard -->
          <div class="scorecard-wrapper mt-3">
            <div class="scorecard">
              <div class="scorecard-header">
                üìù Your Encoded Permits (Monthly)
                <button id="refreshEncodedBtn" class="scorecard-refresh-btn" title="Refresh">
                  <i class="bi bi-arrow-clockwise"></i>
                </button>
              </div>
              <div id="encodedPermitSummary" class="scorecard-list"></div>
              <div id="noEncodedMessage" class="no-record d-none text-center">No records yet.</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Summary Report Tab -->
      <div class="tab-pane fade" id="summaryTab" role="tabpanel" aria-labelledby="summary-tab">
        <div class="profile-banner d-flex flex-column align-items-start p-4 rounded shadow-sm mb-1">

          <!-- Inner Tabs -->
          <ul class="nav nav-tabs mb-3" id="summaryInnerTabs" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" id="permit-summary-tab" data-bs-toggle="tab" data-bs-target="#permitSummary" type="button" role="tab" aria-controls="permitSummary" aria-selected="true">
                Permittee
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="wus-summary-tab" data-bs-toggle="tab" data-bs-target="#wusSummary" type="button" role="tab" aria-controls="wusSummary" aria-selected="false">
                Yearly Accomplishment
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="city-accom-tab" data-bs-toggle="tab" data-bs-target="#cityAccomplishment" type="button" role="tab" aria-controls="cityAccomplishment" aria-selected="false">
                Accomplishment Per City
              </button>
            </li>
          </ul>

          <!-- Inner Tab Content -->
          <div class="tab-content w-100" id="summaryInnerTabsContent">

            <!-- Permit Summary Tab Pane -->
            <div class="tab-pane fade show active" id="permitSummary" role="tabpanel" aria-labelledby="permit-summary-tab">
              <div class="city-table-wrapper text-center my-4">
                <div class="table-responsive d-flex justify-content-center">
                  <div class="table-container">
                    <div id="cityPermitTable" class="mb-4"></div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Water User and Sources Summary Tab Pane -->
            <div class="tab-pane fade" id="wusSummary" role="tabpanel" aria-labelledby="wus-summary-tab">
              <div class="city-table-wrapper text-center my-4">
                <div class="table-responsive d-flex justify-content-center">
                  <div class="table-container">
                    <div id="yearlyWaterUserSummary" class="my-4 w-100"></div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Accomplishment Per City Tab Pane -->
            <div class="tab-pane fade" id="cityAccomplishment" role="tabpanel" aria-labelledby="city-accom-tab">
              <div class="city-table-wrapper text-center my-4">
                <div class="table-responsive d-flex justify-content-center">
                  <div class="table-container">
                    <div id="cityAccomplishmentTable" class="my-4 w-100"></div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>

      <!-- Account Settings Tab -->
      <div class="tab-pane fade" id="settingsTab" role="tabpanel" aria-labelledby="settings-tab">
        <div class="profile-banner d-flex flex-column align-items-start p-4 rounded shadow-sm mb-1 w-100">
          <h3>Account Settings</h3>
          <p class="text-muted">Change your password below.</p>

          <div class="card shadow-sm water-card p-4 mt-4">
            <div class="text-center">
              <i class="fas fa-cog gear-icon"></i>
              <h5 class="text-water mb-3">Change Password</h5>
            </div>
            <form id="changePasswordForm">
              <div class="mb-3">
                <label for="newPassword" class="form-label">New Password</label>
                <input type="password" class="form-control form-water" id="newPassword" required minlength="6" />
              </div>
              <div class="mb-3">
                <label for="confirmPassword" class="form-label">Confirm Password</label>
                <input type="password" class="form-control form-water" id="confirmPassword" required minlength="6" />
              </div>
              <button type="submit" class="btn btn-water w-100">Update Password</button>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!-- Announcement Modal -->
    <div class="modal fade water-modal" id="announcementModal" tabindex="-1" aria-labelledby="announcementModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content water-modal-content">
          <div class="modal-header water-modal-header">
            <h5 class="modal-title" id="announcementModalLabel">Announcement</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body water-modal-body">
            <p id="announcementMessage">Default message</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Barangay Modal -->
    <div class="modal fade" id="barangayModal" tabindex="-1" aria-labelledby="barangayModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
          <div class="modal-header bg-primary text-white">
            <h5 class="modal-title text-white" id="barangayModalLabel">Barangay Breakdown</h5>
            <button type="button" class="btn-close btn-3d btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <!-- Dynamic content here -->
            <div class="table-responsive">
              <div id="barangayModalBody"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!--  Water User Modal -->
    <div class="modal fade" id="waterUsersModal" tabindex="-1" aria-labelledby="waterUsersModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
          <div class="modal-header bg-success text-white">
            <h5 class="modal-title text-white" id="waterUsersModalLabel">Water Users</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="table-responsive">
              <div id="waterUsersModalBody"></div>
            </div>
          </div>
        </div>
      </div>
    </div>


  </div>

  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script type="module" src="./js/dashboard/dashboard-init.js"></script>
</body>
</html>
